{
  "id": "d802bd80-110d-11ef-a936-33d712d227ea",
  "version": "1.0.0-beta.2",
  "name": "sandbox",
  "nodes": [
    {
      "id": "KJvc2obvma",
      "name": "geo_color",
      "x": -202,
      "y": -645,
      "templateName": "Custom",
      "params": [
        {
          "name": "data"
        },
        {
          "name": "data type",
          "value": "geo"
        },
        {
          "name": "color",
          "value": [
            0.11372549019607843,
            0.9686274509803922,
            0.7254901960784313,
            1
          ]
        }
      ]
    },
    {
      "id": "X--wN8g2U3",
      "name": "_empty",
      "x": -194,
      "y": -763,
      "templateName": "_empty",
      "params": [
        {
          "name": "data"
        },
        {
          "name": "width",
          "value": 1
        },
        {
          "name": "height",
          "value": 1
        },
        {
          "name": "color",
          "value": [
            1,
            0,
            0,
            1
          ]
        }
      ]
    },
    {
      "id": "JbuyNd2TBb",
      "name": "tex_createSurface",
      "x": -207,
      "y": -296,
      "templateName": "Custom",
      "params": [
        {
          "name": "width",
          "value": 600
        },
        {
          "name": "height",
          "value": 600
        },
        {
          "name": "range",
          "value": [
            -1.1,
            1.1
          ]
        },
        {
          "name": "clearColor",
          "value": [
            0.43137254901960786,
            0.396078431372549,
            0.9019607843137255,
            1
          ]
        }
      ]
    },
    {
      "id": "vXFPNljqDa",
      "name": "_DISPLAY",
      "x": 67,
      "y": -309,
      "templateName": "Custom",
      "params": [
        {
          "name": "data",
          "source": {
            "id": "Vwk6BriGv",
            "port": "out"
          }
        },
        {
          "name": "live",
          "public": true,
          "value": true
        },
        {
          "name": "RUN",
          "public": true
        }
      ]
    },
    {
      "id": "0r60ivdTh5",
      "name": "geo_toTex",
      "x": -207,
      "y": -229,
      "templateName": "Custom",
      "params": [
        {
          "name": "geoData"
        },
        {
          "name": "texData",
          "source": {
            "id": "JbuyNd2TBb",
            "port": "out"
          }
        }
      ]
    },
    {
      "id": "Vwk6BriGv",
      "name": "geo_CopyToPoints",
      "x": 87,
      "y": -463,
      "templateName": "Custom",
      "params": [
        {
          "name": "geo",
          "source": {
            "id": "wvJtoMpJa",
            "port": "out"
          }
        },
        {
          "name": "points",
          "source": {
            "id": "ehGysH3I4",
            "port": "out"
          }
        }
      ]
    },
    {
      "id": "sOq_lRVq_",
      "name": "row col count",
      "x": 135,
      "y": -840,
      "templateName": "Custom",
      "params": [
        {
          "name": "row cols",
          "public": true,
          "value": 4
        }
      ]
    },
    {
      "id": "_vP_YKOVh",
      "name": "geo_attribCreate",
      "x": -205,
      "y": -475,
      "templateName": "Custom",
      "params": [
        {
          "name": "data"
        },
        {
          "name": "data type",
          "value": "geo"
        },
        {
          "name": "color",
          "value": [
            0.11372549019607843,
            0.9686274509803922,
            0.7254901960784313,
            1
          ]
        }
      ]
    },
    {
      "id": "HKf7XUCC8",
      "name": "geo_Wrangle",
      "x": -202,
      "y": -423,
      "templateName": "Custom",
      "draft": "module.exports = (node, graph) => {\n    const dataIn = node.in('data')\n    const dataOut = node.out('out')\n\n    node.cook = () => {\n        cookUp(node)\n\n        let data = dataIn.value || { pts: [], geo: [] }\n\n        // for each primitive (geo)\n        const centers = data.geo.map(geo => {\n            // find the centroid\n            const sum = geo.pt_indices.reduce((acc, idx) => {\n                return {\n                    x: acc.x + data.pts[idx].x,\n                    y: acc.y + data.pts[idx].y\n                };\n            }, { x: 0, y: 0 });\n            const avg = {\n                x: sum.x / geo.pt_indices.length,\n                y: sum.y / geo.pt_indices.length\n            };\n            \n            return avg\n        });\n\n        // data stream out is just point centers\n        data = { pts: centers, geo: [] }\n\n        dataOut.setValue(data)\n        node.comment = `pts: ${data.pts.length}, geo: ${data.geo.length}`\n    }\n}\n\nfunction cookUp(node) {\n    node.ports\n        .filter((port) => port.dir === 0 && port.source != null)\n        .forEach((port) => {\n            if (typeof port.source.node.cook === 'function') {\n                port.source.node.cook()\n            }\n        })\n}\n",
      "params": [
        {
          "name": "data"
        }
      ]
    },
    {
      "id": "-c4qQ9pZd",
      "name": "geo_Grid",
      "x": 192,
      "y": -760,
      "templateName": "geo_Grid",
      "params": [
        {
          "name": "centerPt",
          "value": [
            0,
            0
          ]
        },
        {
          "name": "width",
          "value": 2
        },
        {
          "name": "height",
          "value": 2
        },
        {
          "name": "rows",
          "source": {
            "id": "sOq_lRVq_",
            "port": "value"
          }
        },
        {
          "name": "cols",
          "source": {
            "id": "sOq_lRVq_",
            "port": "value"
          }
        }
      ]
    },
    {
      "id": "pAobF6noK",
      "name": "_Null",
      "x": -196,
      "y": -569,
      "templateName": "_Null",
      "params": [
        {
          "name": "data"
        }
      ]
    },
    {
      "id": "HlFE5KqDZ",
      "name": "geo_Centroid",
      "x": 193,
      "y": -696,
      "templateName": "geo_Centroid",
      "params": [
        {
          "name": "data",
          "source": {
            "id": "-c4qQ9pZd",
            "port": "out"
          }
        }
      ]
    },
    {
      "id": "wvJtoMpJa",
      "name": "geo_Line",
      "x": -9,
      "y": -757,
      "templateName": "geo_Line",
      "params": [
        {
          "name": "a",
          "value": [
            -1,
            1
          ]
        },
        {
          "name": "b",
          "value": [
            1,
            -1
          ]
        }
      ]
    },
    {
      "id": "CxI9Qjn6b",
      "name": "geo_Merge",
      "x": 216,
      "y": -418,
      "templateName": "geo_Merge",
      "params": [
        {
          "name": "data0"
        },
        {
          "name": "data1"
        }
      ]
    },
    {
      "id": "ehGysH3I4",
      "name": "geo_ScalePts",
      "x": 140,
      "y": -626,
      "templateName": "Custom",
      "params": [
        {
          "name": "data",
          "source": {
            "id": "HlFE5KqDZ",
            "port": "out"
          }
        },
        {
          "name": "rows",
          "source": {
            "id": "sOq_lRVq_",
            "port": "value"
          }
        }
      ]
    }
  ],
  "comments": [
    {
      "id": "WdQlV3AG6",
      "x": -223,
      "y": -383,
      "width": 180,
      "height": 50,
      "fontSize": 10,
      "backgroundColor": [
        0.1,
        0.1,
        0.1,
        1
      ],
      "textColor": [
        0.7,
        0.7,
        0.7,
        1
      ],
      "text": "copy to point and scale/rotate based on point data?",
      "collapseFlags": {}
    }
  ]
}